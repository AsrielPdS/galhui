"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.col = exports.row = exports.stack = exports.divisor = exports.itab = exports.icol = exports.irow = exports.ibox = exports.Ctx = exports.defineSize = void 0;
const galho_1 = require("galho");
const galhui_js_1 = require("./galhui.js");
const util_js_1 = require("galho/util.js");
const orray_js_1 = require("galho/orray.js");
function defineSize(items, apply) {
    let size = 0, l = items.length, sizes = [];
    for (let i of items) {
        let s = i.sz;
        if ((s || (s = 0)) > 95)
            s = 95;
        else if (s === 0)
            s = 100 / l;
        sizes.push(s);
        size += s;
    }
    let result = sizes.map(s => s * 100 / size);
    if (apply)
        for (let i = 0; i < l; i++)
            items[i].sz = result[i];
    return result;
}
exports.defineSize = defineSize;
class Ctx extends galho_1.E {
    constructor(i, root) {
        super(i);
        this.root = this.item(root);
        i.left && (i.left = (0, orray_js_1.orray)(i.left));
        i.right && (i.right = (0, orray_js_1.orray)(i.right));
        i.bottom && (i.bottom = (0, orray_js_1.orray)(i.bottom));
    }
    view() {
        let { left, right, bottom } = this.i;
        return (0, galho_1.div)("_ galy", [
            left && (0, galho_1.div)("l"),
            this.root,
            right && (0, galho_1.div)("r"),
            bottom && (0, galho_1.div)("b"),
        ]);
    }
    change() {
        if (!this.ignoreChange) {
            if ((0, util_js_1.t)(this.i.compress)) {
                this.ignoreChange = true;
                this.root.compress();
                this.ignoreChange = false;
            }
            this.emit("change");
        }
    }
    prots(key) {
        let t = this.i.boxes[key];
        if (!t)
            throw `protyupe "${key}" not found`;
        return t;
    }
    item(item) {
        switch (item.tp) {
            case "s" /* stack */:
                return new Stack(this, item);
            case "t" /* tab */:
                return new Tab(this, item);
            case "i" /* box */:
                return new Box(this, item.base ? (0, util_js_1.extend)(item, this.prots(item.base)) : item);
        }
    }
}
exports.Ctx = Ctx;
class Stack {
    constructor(ctx, i) {
        this.ctx = ctx;
        this.i = i;
        i.$ = this;
    }
    render() {
        let { list, o } = this.i, ctx = this.ctx;
        return (0, orray_js_1.orray)(list, v => (0, util_js_1.isA)(v) ? v : [100 / (0, util_js_1.l)(list), v]).bind((0, galho_1.div)(["_", "stack", o]), {
            insert([sz, item], index, s) {
                s.place(index && index * 2 - 1, [
                    //dupla negação para não inserir 0
                    !!index && divisor("h", (l, r) => {
                        this[index - 1][0] = l;
                        this[index][0] = r;
                        ctx.change();
                    }),
                    (0, galho_1.g)(ctx.item(item)).css(o == "h" ? "width" : "height", `${sz}%`)
                ]);
            },
            remove: (_, index, parent) => {
                if (index)
                    parent.childs(index * 2 - 1, index * 2 + 1).remove();
                else
                    parent.childs(0, 2).remove();
            }
        });
    }
    compress() {
        let { list, persist: p } = this.i, _l = (0, util_js_1.l)(list);
        if (!_l) {
            if (!p)
                return null;
        }
        else if (_l == 1)
            return list[0][1];
        else
            for (let i = 0; i < _l; i++) {
                let t0 = list[i], t = t0[1].$.compress();
                switch (t) {
                    case null:
                        //TODO: remove from context
                        list.removeAt(i--);
                        break;
                    case undefined:
                        break;
                    default:
                        throw "not implemented";
                    // replace(t0, [t0[0], <iitems>t]);
                }
            }
    }
}
class Tab {
    constructor(ctx, i) {
        this.i = i;
        i.$ = this;
    }
    render() {
        let i = this.i, list = i.list;
        return (0, galho_1.div)("_ tab", [
            list.bind((0, galho_1.div)("hd" /* head */), {
                tag: (v, a) => v.c("on" /* on */, a),
                insert: box => box.$.head().c("i" /* item */)
                    .add((0, galhui_js_1.close)(e => { e.stopPropagation(); list.remove(box); }))
                    .on('click', () => list.tag("on", box))
            }),
            (0, util_js_1.call)((0, galho_1.div)("bd" /* body */), b => {
                let cb = (v) => {
                    b.attr("id", false).c("bd" /* body */);
                    if (v) {
                        b.set(v.$.render(true));
                        //v.$.focus?.(b);
                    }
                    else
                        b.set(i.empty?.());
                };
                list.ontag("on", cb);
                cb(list.tags?.on.v);
            }),
        ]);
    }
    compress() {
        let { list, persist: p } = this.i;
        if (!list) {
            if (!p)
                return null;
        }
        else if ((0, util_js_1.l)(list) == 1)
            if (util_js_1.l[0].selfContain)
                return util_js_1.l[0];
    }
}
class Box {
    constructor(ctx, i) {
        this.i = i;
        if (i.def && (0, util_js_1.isU)(i.dt))
            i.dt = i.def();
        i.$ = this;
    }
    render(headerless) {
        let bd = (0, galho_1.wrap)(this.i.render());
        return headerless ? bd.c("i" /* item */) : (0, galho_1.div)("_ tab", [
            this.head().c("_ bar"),
            (0, galho_1.div)("bd" /* body */, bd)
        ]);
    }
    head() {
        let i = this.i;
        return (0, galho_1.div)(0, [
            (0, galhui_js_1.icon)(i.icon),
            (0, util_js_1.lazy)(i.title),
            (0, galhui_js_1.close)(() => { })
        ]);
    }
    compress() { }
}
/**box interface */
const ibox = (base) => ({ tp: "i" /* box */, base });
exports.ibox = ibox;
/**row interface */
const irow = (...list) => ({ tp: "s" /* stack */, o: "h", list });
exports.irow = irow;
/**col interface */
const icol = (...list) => ({ tp: "s" /* stack */, o: "v", list });
exports.icol = icol;
/**tab interface */
const itab = (...list) => ({ tp: "t" /* tab */, list });
exports.itab = itab;
function divisor(o, endcallback) {
    let hr = (0, galho_1.g)('hr', "l-d" /* divisor */);
    return hr.on('mousedown', function () {
        let parent = hr.parent(), parentRect = parent.rect(), prev = hr.prev(), next = hr.next(), l, r, div = galhui_js_1.$.lyDivW / 2, clamp = (value, min, max) => value < min ? min : value > max ? max : value, trigger = () => {
            let e = new Event("resize", { bubbles: true });
            prev.emit(e);
            next.emit(e);
        };
        function moveEventX(e) {
            let p = parentRect.width * 0.05;
            l = clamp(e.clientX - parentRect.left, p, parentRect.left - p);
            prev.css('width', `calc(${(l = l / parentRect.width * 100)}% - ${div}px)`);
            next.css('width', `calc(${(r = 100 - l)}% - ${div}px)`);
            trigger();
        }
        function moveEventY(e) {
            let p = parentRect.height * 0.05;
            l = clamp(e.clientX - parentRect.top, p, parentRect.top - p);
            prev.css('height', `calc(${(l = l / parentRect.height * 100)}% - ${div}px)`);
            next.css('height', `calc(${(r = 100 - l)}% - ${div}px)`);
            trigger();
        }
        galhui_js_1.body.css({ cursor: 'col-resize', userSelect: "none" });
        let t = o == "h" ? moveEventX : moveEventY;
        galhui_js_1.doc
            .on('mousemove', t)
            .one('mouseup', () => {
            galhui_js_1.body.uncss(["cursor", "userSelect"]);
            galhui_js_1.doc.off('mousemove', t);
            endcallback?.(l, r);
        });
    });
}
exports.divisor = divisor;
const stack = (o, list) => (0, galho_1.div)(["_", "stack", o], list.map((v, i) => {
    let [sz, item] = (0, util_js_1.isA)(v) ? v : [100 / (0, util_js_1.l)(list), v];
    return [
        !!i && divisor("h"),
        (0, galho_1.g)(item).css(o == "h" ? "width" : "height", `${sz}%`)
    ];
}));
exports.stack = stack;
const row = (...list) => (0, exports.stack)("h", list);
exports.row = row;
const col = (...list) => (0, exports.stack)("v", list);
exports.col = col;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF5b3V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibGF5b3V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlDQUFxRDtBQUNyRCwyQ0FBaUU7QUFDakUsMkNBQTBGO0FBQzFGLDZDQUFpRDtBQXFCakQsU0FBZ0IsVUFBVSxDQUFDLEtBQWlCLEVBQUUsS0FBZTtJQUMzRCxJQUNFLElBQUksR0FBRyxDQUFDLEVBQ1IsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQ2hCLEtBQUssR0FBRyxFQUFFLENBQUM7SUFDYixLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRTtRQUNuQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUU7WUFDckIsQ0FBQyxHQUFHLEVBQUUsQ0FBQzthQUNKLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDZCxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNkLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZCxJQUFJLElBQUksQ0FBQyxDQUFDO0tBQ1g7SUFDRCxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM1QyxJQUFJLEtBQUs7UUFDUCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUN4QixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QixPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBbkJELGdDQW1CQztBQXdCRCxNQUFhLEdBQUksU0FBUSxTQUEwQjtJQUVqRCxZQUFZLENBQU8sRUFB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