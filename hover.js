"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.tip = exports.ctx = exports.popup = exports.fluid = exports.error = exports.ok = exports.yesNo = exports.okCancel = exports.headBody = exports.fromPanel = exports.addClose = exports.mapButtons = exports.closeModal = exports.openBody = exports.mdOpen = exports.openModal = exports.modalBody = exports.modal = void 0;
const galho_1 = require("galho");
const util_js_1 = require("galho/util.js");
const galhui_js_1 = require("./galhui.js");
const util_js_2 = require("./util.js");
//TODO remover valid
function modal(i = {}) {
    let resolve, p = (0, util_js_1.assign)(new Promise(r => resolve = r), i);
    p.cb = resolve;
    return p;
}
exports.modal = modal;
function modalBody(md, bd, actions, i = {}) {
    md.body = (0, galho_1.g)("form", (0, galho_1.cl)("_ modal panel", i.cls), [
        (0, galho_1.wrap)(bd, "bd"),
        (0, util_js_1.t)(i.close) && (0, galhui_js_1.close)(() => closeModal(md)),
        actions && (0, galho_1.div)("ft", actions.map(a => a.on('click', e => { e.preventDefault(); closeModal(md, a.d()); })))
    ]).on('keydown', (e) => {
        if (e.key == "Escape") {
            (0, galho_1.clearEvent)(e);
            closeModal(md);
        }
    });
    return md;
}
exports.modalBody = modalBody;
function openModal(md) {
    if (!md.area) {
        md.area = (0, galho_1.div)((0, galhui_js_1.hc)("mda" /* modalArea */), md.body).addTo(galhui_js_1.body);
        md.blur && md.area.prop("tabIndex", 0).on("focus", () => closeModal(md));
    }
    return md;
}
exports.openModal = openModal;
function mdOpen(modal, blur) {
    let t = (0, galho_1.div)((0, galhui_js_1.hc)("mda" /* modalArea */), modal).addTo(galhui_js_1.body);
    blur && (0, galho_1.onfocusout)(modal, () => t.remove());
    return t;
}
exports.mdOpen = mdOpen;
/**define a body and show modal */
function openBody(md, bd, actions, i) {
    return openModal(modalBody(md, bd, actions, i));
}
exports.openBody = openBody;
async function closeModal(md, v) {
    if (md.area && (!md.valid || await md.valid(v))) {
        md.area.remove();
        md.cb(v);
        md.area = null;
    }
}
exports.closeModal = closeModal;
function mapButtons(md) {
    md.body.child(".ft").childs('[type="button"],[type="submit"]')
        .eachS(bt => bt.on("click", e => { e.preventDefault(); closeModal(md, bt.d()); }));
    return md;
}
exports.mapButtons = mapButtons;
function addClose(md) {
    md.body.add((0, galhui_js_1.close)(() => closeModal(md)));
    return md;
}
exports.addClose = addClose;
function fromPanel(panel, i = {}) {
    let md = modal(i);
    md.body = (0, galho_1.g)(panel, "_ modal panel");
    return openModal(mapButtons(md));
}
exports.fromPanel = fromPanel;
const headBody = (i, title, bd) => [
    (0, galho_1.div)("hd", [(0, galhui_js_1.icon)(i), title]),
    (0, galho_1.wrap)(bd, "bd"),
];
exports.headBody = headBody;
function okCancel(body, valid) {
    return openBody(modal({ valid: valid && (v => !v || valid()) }), body, [(0, galhui_js_1.confirm)().d(true), (0, galhui_js_1.cancel)()]);
}
exports.okCancel = okCancel;
function yesNo(body, valid) {
    return openBody(modal({ valid: valid && (v => !v || valid()) }), body, [(0, galhui_js_1.positive)(null, galhui_js_1.w.yes).d(true), (0, galhui_js_1.negative)(null, galhui_js_1.w.no)]);
}
exports.yesNo = yesNo;
function ok(msg) {
    return openBody(modal(), msg, [(0, galhui_js_1.confirm)()]);
}
exports.ok = ok;
function error(msg) {
    return openBody(modal(), msg, [(0, galhui_js_1.confirm)()], { cls: "_e" /* error */ });
}
exports.error = error;
function fluid({ x, y, right: r, bottom: b }, menu, [o, side, main]) {
    /*m:main,s:side */
    let { innerHeight: wh, innerWidth: ww } = window, { width: mw, height: mh } = menu.rect(), h = o == "h", e = galhui_js_1.$.rem * .4, [ws, wm, ms, mm, s0, m0, s1, m1] = h ? [wh, ww, mh, mw, y, x, b, r] : [ww, wh, mw, mh, x, y, r, b];
    main || (main = (m0 + (m1 - m0) / 2) > (wm / 2) ? "s" : "e");
    menu
        .css({
        ["max" + (h ? "Width" : "Height")]: (main == "e" ? wm - m1 : m0) - e * 2 + "px",
        [h ? "left" : "top"]: (main == "e" ? m1 + e : Math.max(0, m0 - mm) - e) + "px",
        [h ? "top" : "left"]: Math.max(0, Math.min(ws - ms, side == "s" ? s1 - ms : side == "e" ? s0 : s0 + (s1 - s0) / 2 - ms / 2)) + "px",
    });
}
exports.fluid = fluid;
function popup(div, e, align) {
    let last = (0, galho_1.active)(), ctx = div.prop("tabIndex", 0), 
    // isOut: bool,
    wheelHandler = (e) => (0, galho_1.clearEvent)(e);
    ctx.queryAll('button').on('click', function () { last.valid ? last.focus() : this.blur(); });
    ctx.on({
        focusout: (e) => ctx.contains(e.relatedTarget) || (ctx.remove() && galhui_js_1.body.off("wheel", wheelHandler)),
        keydown(e) {
            if (e.key == "Escape") {
                e.stopPropagation();
                ctx.blur();
            }
        }
    }).addTo(galhui_js_1.body).focus();
    // .css({
    //   left: opts.clientX + 'px',
    //   top: opts.clientY + 'px'
    // })
    (0, util_js_2.anim)(() => (fluid(e(), ctx, align), galhui_js_1.body.contains(ctx)));
    galhui_js_1.body.on("wheel", wheelHandler, { passive: false });
}
exports.popup = popup;
/**context menu */
function ctx(e, data) {
    (0, galho_1.clearEvent)(e);
    popup((0, galho_1.div)("_ menu", (0, galho_1.g)("table", 0, data)), () => new DOMRect(e.clientX, e.clientY, 0, 0), "ve");
}
exports.ctx = ctx;
function tip(root, div, align = "v") {
    div = (0, galho_1.wrap)(div, "_ tip");
    return root?.on({
        mouseenter() {
            galhui_js_1.body.add(div);
            (0, util_js_2.anim)(() => galhui_js_1.body.contains(root) ?
                galhui_js_1.body.contains(div) && fluid(root.rect(), div, align) :
                (div.remove(), false));
        },
        mouseleave() { div.remove(); }
    });
}
exports.tip = tip;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG92ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJob3Zlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBNEY7QUFDNUYsMkNBQXVFO0FBQ3ZFLDJDQUErSDtBQUUvSCx1Q0FBaUM7QUFtQmpDLG9CQUFvQjtBQUNwQixTQUFnQixLQUFLLENBQVUsSUFBZSxFQUFFO0lBQzlDLElBQUksT0FBWSxFQUFFLENBQUMsR0FBRyxJQUFBLGdCQUFNLEVBQUMsSUFBSSxPQUFPLENBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxPQUFPLENBQUM7SUFDZixPQUFPLENBQUMsQ0FBQztBQUNYLENBQUM7QUFKRCxzQkFJQztBQUNELFNBQWdCLFNBQVMsQ0FBSSxFQUFZLEVBQUUsRUFBTyxFQUFFLE9BQWEsRUFBRSxJQUFXLEVBQUU7SUFDOUUsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFBLFNBQUMsRUFBQyxNQUFNLEVBQUUsSUFBQSxVQUFFLEVBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUM5QyxJQUFBLFlBQUksRUFBQyxFQUFFLEVBQUUsSUFBSSxDQUFDO1FBQ2QsSUFBQSxXQUFDLEVBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUEsaUJBQU8sRUFBQyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDM0MsT0FBTyxJQUFJLElBQUEsV0FBRyxFQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FB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QUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyRyxJQUFJLEtBQUosSUFBSSxHQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBQztJQUNyRCxJQUFJO1NBQ0QsR0FBRyxDQUFDO1FBQ0gsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDLEdBQUcsSUFBSTtRQUM3RSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJO1FBQzlFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1B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