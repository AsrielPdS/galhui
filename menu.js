"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.barcb = exports.mbsep = exports.mbitem = exports.right = exports.menubar = exports.menusep = exports.submenu = exports.menucb = exports.menuitem = exports.wait = exports.menu = void 0;
const galho_1 = require("galho");
const util_js_1 = require("galho/util.js");
const galhui_js_1 = require("./galhui.js");
const hover_js_1 = require("./hover.js");
const util_js_2 = require("./util.js");
const wait_js_1 = require("./wait.js");
function menu(items) { return (0, galho_1.div)("_ menu", (0, galho_1.g)("table", 0, items)); }
exports.menu = menu;
/** */
const wait = (callback) => (0, util_js_1.call)((0, galho_1.g)("tr", 0, (0, galho_1.g)("td", 0, (0, wait_js_1.wait)(1 /* out */)).prop("colSpan", 4)), tr => (0, wait_js_1.waiter)(tr, callback));
exports.wait = wait;
/**menu item */
const menuitem = (i, text, action, side) => (0, galho_1.g)("tr", "i" /* item */, [
    (0, galho_1.g)("td", 0, (0, galhui_js_1.icon)(i)),
    (0, galho_1.g)("td", 0, text),
    (0, galho_1.g)("td", "sd" /* side */, side),
    (0, galho_1.g)("td")
]).on("click", action);
exports.menuitem = menuitem;
/**checkbox */
function menucb(checked, text, toggle, id = (0, util_js_2.uuid)(4), disabled) {
    let input = (0, galho_1.g)("input", { id, checked, disabled, indeterminate: checked == null, type: "checkbox" });
    toggle && input.on("input", () => toggle.call(input, input.e.checked));
    return (0, galho_1.g)("tr", (0, galho_1.cl)("i", disabled && "ds" /* disabled */), [
        (0, galho_1.g)("td", 0, input.on("click", e => e.stopPropagation())),
        (0, galho_1.g)("td", 0, (0, galho_1.g)("label", 0, text).prop("htmlFor", id)),
        (0, galho_1.g)("td"), (0, galho_1.g)("td")
    ]);
}
exports.menucb = menucb;
const submenu = (i, text, items) => (0, util_js_1.call)((0, galho_1.g)("tr", "i" /* item */, [
    (0, galho_1.g)("td", 0, (0, galhui_js_1.icon)(i)),
    (0, galho_1.g)("td", 0, text),
    (0, galho_1.g)("td"),
    (0, galho_1.g)("td", 0, (0, galhui_js_1.icon)("menuR"))
]), e => {
    let mn;
    e.on("click", () => {
        e.tcls("on" /* on */).is('.' + "on" /* on */) ?
            (0, hover_js_1.fluid)(e.rect(), (mn || (mn = (0, galho_1.g)("table", "menu" /* menu */, items))).addTo(e), "h") :
            mn.remove();
    });
});
exports.submenu = submenu;
const menusep = () => (0, galho_1.g)("tr", "div" /* separator */);
exports.menusep = menusep;
/** */
const menubar = (...items) => (0, galho_1.div)("_ bar", items);
exports.menubar = menubar;
/** */
const right = () => (0, galho_1.div)("r" /* right */);
exports.right = right;
const mbitem = (i, text, action) => (0, galho_1.g)("button", "i", [(0, galhui_js_1.icon)(i), text]).on("click", action);
exports.mbitem = mbitem;
/**menubar separator */
const mbsep = () => (0, galho_1.g)("hr");
exports.mbsep = mbsep;
/**menubar checkbox */
function barcb(checked, text, toggle, disabled) {
    let input = (0, galho_1.g)("input", { checked, disabled, indeterminate: checked == null, type: "checkbox" });
    toggle && input.on("input", () => toggle.call(input, input.e.checked));
    return (0, galho_1.g)("label", (0, galho_1.cl)("i", disabled && "ds" /* disabled */), [input, text]);
}
exports.barcb = barcb;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1lbnUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaUNBQTZDO0FBQzdDLDJDQUFpRDtBQUNqRCwyQ0FBMkQ7QUFDM0QseUNBQW1DO0FBQ25DLHVDQUFpQztBQUNqQyx1Q0FBOEU7QUFLOUUsU0FBZ0IsSUFBSSxDQUFDLEtBQWlCLElBQUksT0FBTyxJQUFBLFdBQUcsRUFBQyxRQUFRLEVBQUUsSUFBQSxTQUFDLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUF2RixvQkFBdUY7QUFFdkYsTUFBTTtBQUNDLE1BQU0sSUFBSSxHQUFHLENBQUMsUUFBaUIsRUFBRSxFQUFFLENBQ3hDLElBQUEsY0FBSSxFQUFDLElBQUEsU0FBQyxFQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBQSxTQUFDLEVBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFBLGNBQUssY0FBWSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBRHBGLFFBQUEsSUFBSSxRQUNnRjtBQUVqRyxlQUFlO0FBQ1IsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFPLEVBQUUsSUFBUyxFQUFFLE1BQWMsRUFBRSxJQUFVLEVBQUUsRUFBRSxDQUFDLElBQUEsU0FBQyxFQUFDLElBQUksa0JBQVU7SUFDMUYsSUFBQSxTQUFDLEVBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFBLGdCQUFJLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkIsSUFBQSxTQUFDLEVBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUM7SUFDaEIsSUFBQSxTQUFDLEVBQUMsSUFBSSxtQkFBVSxJQUFJLENBQUM7SUFDckIsSUFBQSxTQUFD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