"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.barcb = exports.mbsep = exports.mbitem = exports.right = exports.menubar = exports.menusep = exports.submenu = exports.menucb = exports.menuitem = exports.wait = exports.menu = void 0;
const galho_1 = require("galho");
const util_js_1 = require("./util.js");
const galhui_js_1 = require("./galhui.js");
const hover_js_1 = require("./hover.js");
const wait_js_1 = require("./wait.js");
function menu(items) { return (0, galho_1.div)("_ menu", (0, galho_1.g)("table", 0, items)); }
exports.menu = menu;
/** */
const wait = (callback) => (0, util_js_1.call)((0, galho_1.g)("tr", 0, (0, galho_1.g)("td", 0, (0, wait_js_1.wait)(1 /* out */)).prop("colSpan", 4)), tr => (0, wait_js_1.waiter)(tr, callback));
exports.wait = wait;
/**menu item */
const menuitem = (i, text, action, side) => (0, galho_1.g)("tr", "i" /* item */, [
    (0, galho_1.g)("td", 0, (0, galhui_js_1.icon)(i)),
    (0, galho_1.g)("td", 0, text),
    (0, galho_1.g)("td", "sd" /* side */, side),
    (0, galho_1.g)("td")
]).on("click", action);
exports.menuitem = menuitem;
/**checkbox */
function menucb(checked, text, toggle, id = (0, util_js_1.uuid)(4), disabled) {
    let input = (0, galho_1.g)("input", { id, checked, disabled, indeterminate: checked == null, type: "checkbox" });
    toggle && input.on("input", () => toggle.call(input, input.e.checked));
    return (0, galho_1.g)("tr", (0, galho_1.cl)("i", disabled && "ds" /* disabled */), [
        (0, galho_1.g)("td", 0, input.on("click", e => e.stopPropagation())),
        (0, galho_1.g)("td", 0, (0, galho_1.g)("label", 0, text).prop("htmlFor", id)),
        (0, galho_1.g)("td"), (0, galho_1.g)("td")
    ]);
}
exports.menucb = menucb;
const submenu = (i, text, items) => (0, util_js_1.call)((0, galho_1.g)("tr", "i" /* item */, [
    (0, galho_1.g)("td", 0, (0, galhui_js_1.icon)(i)),
    (0, galho_1.g)("td", 0, text),
    (0, galho_1.g)("td"),
    (0, galho_1.g)("td", 0, (0, galhui_js_1.icon)("menuR"))
]), e => {
    let mn;
    e.on("click", () => {
        e.tcls("on" /* on */).is('.' + "on" /* on */) ?
            (0, hover_js_1.fluid)(e.rect(), (mn || (mn = (0, galho_1.g)("table", "menu" /* menu */, items))).addTo(e)) :
            mn.remove();
    });
});
exports.submenu = submenu;
const menusep = () => (0, galho_1.g)("tr").cls("div" /* separator */);
exports.menusep = menusep;
/** */
const menubar = (...items) => (0, galho_1.div)("_ bar", items);
exports.menubar = menubar;
/** */
const right = () => (0, galho_1.div)("r" /* right */);
exports.right = right;
const mbitem = (i, text, action) => (0, galho_1.g)("button", "i", [(0, galhui_js_1.icon)(i), text]).on("click", action);
exports.mbitem = mbitem;
/**menubar separator */
const mbsep = () => (0, galho_1.g)("hr");
exports.mbsep = mbsep;
/**menubar checkbox */
function barcb(checked, text, toggle, disabled) {
    let input = (0, galho_1.g)("input", { checked, disabled, indeterminate: checked == null, type: "checkbox" });
    toggle && input.on("input", () => toggle.call(input, input.e.checked));
    return (0, galho_1.g)("label", (0, galho_1.cl)("i", disabled && "ds" /* disabled */), [input, text]);
}
exports.barcb = barcb;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1lbnUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaUNBQTZDO0FBQzdDLHVDQUFtRDtBQUNuRCwyQ0FBMkQ7QUFDM0QseUNBQW1DO0FBQ25DLHVDQUE4RTtBQUs5RSxTQUFnQixJQUFJLENBQUMsS0FBaUIsSUFBSSxPQUFPLElBQUEsV0FBRyxFQUFDLFFBQVEsRUFBRSxJQUFBLFNBQUMsRUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQXZGLG9CQUF1RjtBQUV2RixNQUFNO0FBQ0MsTUFBTSxJQUFJLEdBQUcsQ0FBQyxRQUFpQixFQUFFLEVBQUUsQ0FDeEMsSUFBQSxjQUFJLEVBQUMsSUFBQSxTQUFDLEVBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFBLFNBQUMsRUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUEsY0FBSyxjQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFEcEYsUUFBQSxJQUFJLFFBQ2dGO0FBRWpHLGVBQWU7QUFDUixNQUFNLFFBQVEsR0FBRyxDQUFDLENBQU8sRUFBRSxJQUFTLEVBQUUsTUFBYyxFQUFFLElBQVMsRUFBRSxFQUFFLENBQUMsSUFBQSxTQUFDLEVBQUMsSUFBSSxrQkFBVTtJQUN6RixJQUFBLFNBQUMsRUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUEsZ0JBQUksRUFBQyxDQUFDLENBQUMsQ0FBQztJQUNuQixJQUFBLFNBQUMsRUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQztJQUNoQixJQUFBLFNBQUMsRUFBQyxJQUFJLG1CQUFVLElBQUksQ0FBQztJQUNyQixJQUFBLFNBQUMsRUFBQyxJQUFJLENB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